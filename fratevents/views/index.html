<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	{% load static %}{% get_static_prefix as STATIC_URL %}
	<meta charset="utf-8" />

	<!-- Set the viewport width to device width for mobile -->
	<meta name="viewport" content="width=device-width" />

	<title>CalHaps</title>

	<!-- Included CSS Files (Uncompressed) -->
	<!--
	<link rel="stylesheet" href="{{ STATIC_URL }}css/foundation.css">
	-->

	<!-- Included CSS Files (Compressed) -->
	<link rel="stylesheet" href="{{ STATIC_URL }}css/foundation.min.css">
	<link rel="stylesheet" href="{{ STATIC_URL }}css/app.css">
	<link rel="stylesheet" href="{{ STATIC_URL }}css/joyride-1.0.3.css">

	<script src="{{ STATIC_URL }}js/modernizr.foundation.js"></script>

	<!-- IE Fix for HTML5 Tags -->
	<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Included JS Files (Uncompressed) -->

	<!-- 

	<script src="{{ STATIC_URL }}js/modernizr.foundation.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.mediaQueryToggle.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.reveal.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.orbit.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.navigation.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.buttons.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.tabs.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.forms.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.tooltips.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.accordion.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.placeholder.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.alerts.js"></script>

	-->

	<!-- Included JS Files (Compressed) -->
	<script src="{{ STATIC_URL }}js/foundation.min.js"></script>

	<!-- Initialize JS Plugins -->
	<script src="{{ STATIC_URL }}js/app.js"></script>

	<!--jQuery UI -->
	<link type="text/css" href="{{ STATIC_URL }}css/jquery-ui-1.8.22.custom.css" rel="stylesheet">
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery-ui-1.8.22.custom.min.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.scrollTo.js"></script>

	<!-- Joyride -->
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.joyride-1.0.3.js"></script>

	<!-- DatePicker stuff -->
	<script>

		$(function() {
			$( "#datepicker" ).datepicker({
				showOn: "focus",
				showAnim: "slideDown",
				minDate: new Date(),
				onSelect: function(dateText, inst){
					console.log(dateText);
					dateID = inst.selectedDay + "" + inst.selectedMonth + "" + inst.selectedYear;
					$('#nlists').scrollTo( $("#"+dateID), 800);
				}
			});
		});

	</script>

    <!--Google maps API -->
    <script type="text/javascript" src="{{ STATIC_URL }}js/main.js"></script>

    <!-- Google Analytics -->
    <script type="text/javascript">
		var _gaq = _gaq || [];
	  	_gaq.push(['_setAccount', 'UA-33875398-1']);
	  	_gaq.push(['_trackPageview']);

	  	(function() {
	    	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  	})();
	</script>
</head>

<body>

	<!-- Top Navigation Bar -->
	<ul class="nav-bar" id="navBar">
 		<li class="three columns" id="searchBar"><a href="#"><input type="text" id="datepicker" placeholder=" Search by date"></a></li>
 		<li><div id="logoDiv"><a href="javascript:;" data-reveal-id="aboutUsModal"><img id="logo" src="{{ STATIC_URL }}images/logos/calhaps.png" /></a></div></li>
 		<li id="addEvent"><a href="javascript:;" data-reveal-id="addEventModal"><img src="{{ STATIC_URL }}images/plus-icon.png" style="height:12px;"/> Event</a></li>
 		<li id="takeTour"><a href="javascript:;" onclick="start_tour();">Take a Tour</a></li>
 		<li id="feedback"><a href="javascript:;" data-reveal-id="feedbackModal">Feedback</a></li>
 		<li class="hide-for-medium-down" id="catchPhrase"><a style="font-style:italic;">Because college students shouldn't be studying on Friday nights!</a></li>
	</ul>

	<!-- Main Content -->
  	<div class="twelve columns" id="main-content">
  		{% csrf_token %}
  		<div class="three columns" id="sidebar">
			<ul id="nlists">
			</ul>
  		</div>
  		<div class="nine columns" id="map-container">
		    <div class="hide-for-small" id="map_canvas"></div>
		</div>
	</div>

	<div id="aboutUsModal" class="reveal-modal">
		<div style="text-align:center;">
	     	<h1>About Us</h1>
	     	<img src="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/273682_845180367_987530956_n.jpg" /><br /><br />
	     	<p><b><i>Hardik Agarwal:</i></b> An EECS major and part of a frat</p>
	     	<img src="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/276089_805239109_1278516360_n.jpg" /><br /><br />
	     	<p><b><i>Sanchit Bareja:</i></b> An EECS major and builds random things</p>
	     	<a class="close-reveal-modal">&#215;</a>
	    </div>
	</div>

	<div id="feedbackModal" class="reveal-modal">
		<div style="text-align:center;">
	     	<h1>Drop us some feedback!</h1>
	     	<p>
	     		<textarea rows="15" cols="20" id="feedbackForm">Did you like our site? Or found a bug? Send us some anonymous feedback. If you would like to get in touch with us, include your email in the feedback as well.

We are constantly looking to improve this site and any form of feedback will really help us a long way :) Thanks a lot in advance!
				</textarea>
				<a href="#" class="round button" id="feedbackFormSubmit">Submit Feedback!</a>
	     	</p>
	     	<a class="close-reveal-modal">&#215;</a>
	     </div>
	</div>

	<div id="addEventModal" class="reveal-modal">
		<div>
	     	<h1>Add an event</h1>
	     	<p>The easiest way to add an event is either through the form below or by mentioning @calhaps in a tweet - isn't that cool?.<br /> (E.g. "Cal Performances is hosting Dance Night at international house starting 10pm tmr. Cal ID required. @calhaps")</p>
	     	<div id="addEventForm">
	     		<div class="row">
	     			<div class="three columns">
			     		<label class="right inline">Event name:</label>
			     	</div>
			     	<div class="nine columns">
			     		<input type="text" placeholder="E.g. Boogy Night or Dance Tryouts" id="eventTitle"/>
			     	</div>
			     </div>
			     <br />
			     <div class="row">
			     	<div class="three columns">
			     		<label class="right inline">Where:</label>
			     	</div>
			     	<div class="nine columns">
			     		<input type="text" placeholder="The Castle" id="eventWhere"/>	
			     	</div>
			     </div>
			     <br />
			     <div class="row">
			     	<div class="three columns">
			     		<label class="right inline">When:</label>
			     	</div>
			     	<div class="nine columns">
			     		<input type="text" placeholder="10pm, Tomorrow" id="eventWhen"/>
		     		</div>
		     	</div><br />
		     	<div class="row">
			     	<label>Description for the event</label>
		     		<textarea rows="15" cols="20" id="eventDescription">Give us as much description about the event as possible. If possible, information about the host will also be much appreciated. :) Thanks!
					</textarea>
				</div>
				<br />
				<a href="#" class="round button" id="addEventFormSubmit">Add Event</a>
				<p><br />Events are not added instantly. We get an email about your event before adding it. This process is purely to make sure that we are not receiving spam. Thanks!</p>
	    	</div>
	     	<a class="close-reveal-modal">&#215;</a>
	    </div>
	</div>

	<script type="text/javascript">
		$("#feedbackFormSubmit").click(function(){
			$("#feedbackForm").before('<div id="spinnerWait"><div class="spinner"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div><div class="bar7"></div><div class="bar8"></div><div class="bar9"></div><div class="bar10"></div><div class="bar11"></div><div class="bar12"></div></div><p>Sending your feedback...</p></div>');
			$.ajax({
				type: "POST",
				url: "/feedback/",
				data: { feedback: $("#feedbackForm").val(), csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val() }
			}).done(function( returnData ) {
				if(returnData['success']){
					$("#feedbackFormSubmit").remove();
					$("#feedbackForm").remove();
					$("#spinnerWait").replaceWith("<p>Thanks for your feedback! Your feedback has reached us :)</p>");
				} else {
					$("#spinnerWait").remove();
					$("#feedbackForm").replaceWith("<p>Oops! Something broke. Please try again in a while :( </p>");
				}
			});
		});
	</script>

	<script type="text/javascript">
		$("#addEventFormSubmit").click(function(){
			console.log($("#eventTitle").val());
			console.log($("#eventWhen").val());
			console.log($("#eventWhere").val());
			if($("#eventTitle").val() == "") {
				console.log("eventTitle is empty");
			}
			if($("#eventWhen").val() == "") {
				console.log("eventWhen is empty");
			}
			if($("#eventWhere").val() == "") {
				console.log("eventWhere is empty");
			}
			$("#addEventForm").before('<div id="spinnerWait"><div class="spinner"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div><div class="bar7"></div><div class="bar8"></div><div class="bar9"></div><div class="bar10"></div><div class="bar11"></div><div class="bar12"></div></div><p>Sending your feedback...</p></div>');
			$.ajax({
				type: "POST",
				url: "/add/event/",
				data: { eventDescription: $("#eventDescription").val(), eventTitle: $("#eventTitle").val(), eventWhen: $("#eventWhen").val(), eventWhere: $("#eventWhere").val() , csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val() }
			}).done(function( returnData ) {
				if(returnData['success']){
					$("#addEventFormSubmit").remove();
					$("#addEventForm").remove();
					$("#spinnerWait").replaceWith("<p>Thanks for adding the event! :)</p>");
				} else {
					$("#spinnerWait").remove();
					$("#addEventForm").replaceWith("<p>Oops! Something broke. Please try again in a while :( </p>");
				}
			});
		});
	</script>

	<!-- Tip Content -->
  	<ol id="joyRideTipContent">
  		<div id="shouldTakeTour">{{ takeTour }}</div>
  	  	<li data-id="logoDiv" data-text="Start" data-options:"tipContainer:body;">
  	    	<h2>Hello! Welcome to Calhaps!</h2>
  	    	<p>This is a quick tour on the main features of the site. Enjoy!</p>
  	  	</li>
  	  	<li data-id="eventTour" data-text="Next" data-options="tipLocation:bottom;">
  	  		<h2>Here is the list of all the events</h2>
        	<p>All the events are listed here. If you click on them, you will get more information about it on the map.</p>
  	  	</li>
  	  	<li data-id="searchBar" data-text="Next" data-options="tipLocation:bottom;">
  	    	<h2>Search for events by date here</h2>
  	    	<p>Pick a date for which you would like to attend events.</p>
  	  	</li>
  	  	<li data-id="addEvent" data-text="Next" data-options="tipLocation:bottom;">
  	    	<h2>Add an event</h2>
  	    	<p>Add an event by sending us a message or by mentioning us on twitter (@calhaps)</p>
  	  	</li>
  	  	<li data-id="feedback" data-text="Next" data-options="tipLocation:bottom;">
  	    	<h2>Feedback</h2>
        	<p>And if you have an idea or find bugs on the site, don't forget to leave us some feedback :)</p>
  	  	</li>
  	  	<li data-id="logoDiv" data-text="Start surfing!" data-options="tipLocation:bottom;">
  	    	<h2>Thank you!</h2>
        	<p>Finally, we are always adding features so do look out for them!</p>
  	  	</li>
  	</ol>

</body>

</html>