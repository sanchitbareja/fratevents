<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	{% load static %}{% get_static_prefix as STATIC_URL %}
	<meta charset="utf-8" />

	<!-- Set the viewport width to device width for mobile -->
	<meta name="viewport" content="width=device-width" />

	<title>CalHaps</title>

	<!-- Included CSS Files (Uncompressed) -->
	<!--
	<link rel="stylesheet" href="{{ STATIC_URL }}css/foundation.css">
	-->

	<!-- Included CSS Files (Compressed) -->
	<link rel="stylesheet" href="{{ STATIC_URL }}css/foundation.min.css">
	<link rel="stylesheet" href="{{ STATIC_URL }}css/app.css">
	<link rel="stylesheet" href="{{ STATIC_URL }}css/joyride-1.0.3.css">

	<script src="{{ STATIC_URL }}js/modernizr.foundation.js"></script>

	<!-- IE Fix for HTML5 Tags -->
	<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Included JS Files (Uncompressed) -->

	<!-- 

	<script src="{{ STATIC_URL }}js/modernizr.foundation.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.mediaQueryToggle.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.reveal.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.orbit.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.navigation.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.buttons.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.tabs.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.forms.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.tooltips.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.accordion.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.placeholder.js"></script>

	<script src="{{ STATIC_URL }}js/jquery.foundation.alerts.js"></script>

	-->

	<!-- Included JS Files (Compressed) -->
	<script src="{{ STATIC_URL }}js/foundation.min.js"></script>

	<!-- Initialize JS Plugins -->
	<script src="{{ STATIC_URL }}js/app.js"></script>

    <style type="text/css">
	    #Container {position:relative;margin:20px;}
    	.TopLeft, .TopRight, .BottomLeft, .BottomRight {position:absolute; z-index:10;background-image: url({{ STATIC_URL }}images/corners.png);width:20px;height:20px;}
	   .TopLeft {left: 0; top: 0;}
	   .TopRight {right: 0; top: 0; background-position: top right;}
	   .BottomRight {right: 0; bottom: 0; background-position: bottom right;}
	   .BottomLeft {left: 0; bottom: 0; background-position: bottom left;}
	   #map_canvas { height:300px; }
    </style>

	<!-- Google Maps API -->
	<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
	<script>
      function initialize() {
        var myLatlng = new google.maps.LatLng({{ event.location.lat }},{{ event.location.lng }});
        var mapOptions = {
          zoom: 16,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          draggable: false
        }
        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: "{{ event.title }}"
        });
      }

      window.onload = initialize;
    </script>

    <!-- Google Analytics -->
    <script type="text/javascript">
		var _gaq = _gaq || [];
	  	_gaq.push(['_setAccount', 'UA-33875398-1']);
	  	_gaq.push(['_trackPageview']);

	  	(function() {
	    	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  	})();
	</script>
</head>

<body>

	<!-- Top Navigation Bar -->
	<ul class="nav-bar" id="navBar">
 		<li><div id="logoDiv"><a href="javascript:;" data-reveal-id="aboutUsModal"><img id="logo" src="{{ STATIC_URL }}images/logos/calhaps.png" /></a></div></li>
 		<li id="addEvent"><a href="javascript:;" data-reveal-id="addEventModal"><img src="{{ STATIC_URL }}images/plus-icon.png" style="height:12px;"/> Event</a></li>
 		<li id="feedback"><a href="javascript:;" data-reveal-id="feedbackModal">Feedback</a></li>
 		<li class="hide-for-medium-down" id="catchPhrase"><a style="font-style:italic;">Because college students shouldn't be studying on Friday nights!</a></li>
	</ul>

	<!-- Main Content -->
	<div class="row">
	  	<div class="twelve columns">
	  		{% csrf_token %}
	  		<div class="row">
	  			<div id="Container">
		  			<div class="TopLeft"></div>
				    <div class="TopRight"></div>
				    <div id="map_canvas"></div>
				    <div class="BottomLeft"></div>
				    <div class="BottomRight"></div>
				</div>
	  		</div>
	  		<div class="row">
		  		<div class="four columns">
		  			<img src="{{ event.club.image }}">
		  		</div>
		  		<div class="eight columns" id="map-container">
		  			<h2>{{ event.title }}</h2>
		  			<p class="radius success label">@{{ event.location.name }}, {{ event.startTime }}</p>
		  			<hr>
		  			<p>{{ event.description|safe }}</p>
				</div>
<!-- 				<div class="three columns">
					<dl class="nice vertical tabs">
					  <dd class="active"><a href="#vertical1">Vertical Tab 1</a></dd>
					  <dd><a href="#vertical2">Vertical Tab 2</a></dd>
					  <dd><a href="#vertical3">Vertical Tab 3</a></dd>
					</dl>
				</div>
 -->			</div>
		</div>
	</div>

	<div id="aboutUsModal" class="reveal-modal">
		<div style="text-align:center;">
	     	<h1>About Us</h1>
	     	<img src="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/273682_845180367_987530956_n.jpg" /><br /><br />
	     	<p><b><i>Hardik Agarwal:</i></b> An EECS major and part of a frat</p>
	     	<img src="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/276089_805239109_1278516360_n.jpg" /><br /><br />
	     	<p><b><i>Sanchit Bareja:</i></b> An EECS major and builds random things</p>
	     	<a class="close-reveal-modal">&#215;</a>
	    </div>
	</div>

	<div id="addEventModal" class="reveal-modal">
		<div>
	     	<h1>Add an event</h1>
	     	<p>The easiest way to add an event is either through the form below or by mentioning @calhaps in a tweet - isn't that cool?. <br /> (E.g. "Cal Performances is hosting Dance Night at international house starting 10pm tmr. Cal ID required. @calhaps")</p>
	     	<p>
	     		<textarea rows="15" cols="20" id="addEventForm">Give us as much description about the event as possible (Where, When, Host, Title, General event description or restrictions and etc.). If possible, information about the host will also be much appreciated. :) Thanks!
				</textarea>
				<a href="#" class="round button" id="addEventFormSubmit">Add Event</a>
	     	</p>
	     	<a class="close-reveal-modal">&#215;</a>
	     </div>
	</div>

	<div id="feedbackModal" class="reveal-modal">
		<div style="text-align:center;">
	     	<h1>Drop us some feedback!</h1>
	     	<p>
	     		<textarea rows="15" cols="20" id="feedbackForm">Did you like our site? Or found a bug? Send us some anonymous feedback. If you would like to get in touch with us, include your email in the feedback as well.

We are constantly looking to improve this site and any form of feedback will really help us a long way :) Thanks a lot in advance!
				</textarea>
				<a href="#" class="round button" id="feedbackFormSubmit">Submit Feedback!</a>
	     	</p>
	     	<a class="close-reveal-modal">&#215;</a>
	     </div>
	</div>

	<script type="text/javascript">
		$("#feedbackFormSubmit").click(function(){
			$("#feedbackForm").before('<div id="spinnerWait"><div class="spinner"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div><div class="bar7"></div><div class="bar8"></div><div class="bar9"></div><div class="bar10"></div><div class="bar11"></div><div class="bar12"></div></div><p>Sending your feedback...</p></div>');
			$.ajax({
				type: "POST",
				url: "/feedback/",
				data: { feedback: $("#feedbackForm").val(), csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val() }
			}).done(function( returnData ) {
				if(returnData['success']){
					$("#feedbackFormSubmit").remove();
					$("#feedbackForm").remove();
					$("#spinnerWait").replaceWith("<p>Thanks for your feedback! Your feedback has reached us :)</p>");
				} else {
					$("#spinnerWait").remove();
					$("#feedbackForm").replaceWith("<p>Oops! Something broke. Please try again in a while :( </p>");
				}
			});
		});
	</script>

	<script type="text/javascript">
		$("#addEventFormSubmit").click(function(){
			$("#addEventForm").before('<div id="spinnerWait"><div class="spinner"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div><div class="bar7"></div><div class="bar8"></div><div class="bar9"></div><div class="bar10"></div><div class="bar11"></div><div class="bar12"></div></div><p>Sending your feedback...</p></div>');
			$.ajax({
				type: "POST",
				url: "/add/event/",
				data: { eventInfo: $("#addEventForm").val(), csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val() }
			}).done(function( returnData ) {
				if(returnData['success']){
					$("#addEventFormSubmit").remove();
					$("#addEventForm").remove();
					$("#spinnerWait").replaceWith("<p>Thanks for adding the event! :)</p>");
				} else {
					$("#spinnerWait").remove();
					$("#addEventForm").replaceWith("<p>Oops! Something broke. Please try again in a while :( </p>");
				}
			});
		});
	</script>


</body>

</html>